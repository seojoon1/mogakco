# Discord ë§ˆëª¨í‚¤ ëª¨ê°ì½” ë´‡

ë§ˆëª¨í‚¤ ëª¨ê°ì½” ê°ì‹œë¥¼ ìœ„í•´ ë§Œë“¤ì—ˆì§€ë§Œ ë””ìŠ¤ì½”ë“œ ë´‡ ê³µë¶€ë¥¼ ìœ„í•´ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤.

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

-   **ì…ì¥/í‡´ì¥ ì•Œë¦¼**: ì§€ì •ëœ ìŒì„± ì±„ë„ì˜ ìœ ì € í™œë™ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶”ì í•©ë‹ˆë‹¤.
-   **ì±„ë„ ì„¤ì •**: ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ `/ì„¤ì •`ì„ í†µí•´ ê°ì‹œí•  ìŒì„± ì±„ë„ê³¼ ë¡œê·¸ë¥¼ ë‚¨ê¸¸ í…ìŠ¤íŠ¸ ì±„ë„ì„ ì‰½ê²Œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
-   **ì´ˆê¸° ì„¤ì •**: ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ `/ì´ˆê¸°ì„¤ì •`ì„ í†µí•´ ê²€ì—´ëœ ë‚´ìš©ì˜ ë¡œê·¸ë¥¼ ë‚¨ê¸¸ í…ìŠ¤íŠ¸ ì±„ë„ì„ ìë™ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
-   **ê²€ì—´**: ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ `/ê²€ì—´ì¶”ê°€, /ê²€ì—´ì‚­ì œ, /ê²€ì—´ëª©ë¡` ì„ í†µí•´ ê²€ì—´ í…ìŠ¤íŠ¸ ì¶”ê°€, ì‚­ì œ, ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
-   **ì²˜ë²Œ**: ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ `/ì²˜ë²Œì„¤ì •` ì„ í†µí•´ ì²˜ë²Œ ê°•ë„ë¥¼ ì„¤ì • ê°€ëŠ¥í•©ë‹ˆë‹¤.
-   **ê²½ê³  ì´ˆê¸°í™”**: ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ `/ê²½ê³ ì´ˆê¸°í™”` ì„ í†µí•´ í•´ë‹¹ ì‚¬ìš©ìì˜ ê²½ê³ ë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
-   **ë­í‚¹**: ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ `/ë­í‚¹` ì„ í†µí•´ ì„¤ì •ì„ í†µí•´ ì§€ì •í•œ ê°ì‹œ ìŒì„± ì±„ë„ì˜ ì±„ë¥˜ ë­í‚¹ì„ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤ .
-   **ëª…ë ¹ì–´**: ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ `/ëª…ë ¹ì–´` ë¥¼ ì‚¬ìš©ê°€ëŠ¥í•œ ëª…ë ¹ì–´ë¥¼ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.
-   **ì…ì¥**: ìŠ¬ë˜ì‹œ ëª…ë ¹ì–´ `/ì…ì¥` ì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìê°€ ì…ì¥ì‹œ í™˜ì˜ë©”ì„¸ì§€ ì¶œë ¥ on/off, í™˜ì˜ì¸ì‚¬ ë©”ì„¸ì§€ ì±„ë„, ë©”ì„¸ì§€ ë‚´ìš© ì„¤ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.



---

## âš™ï¸ ì„¤ì¹˜ ë° ì„¤ì • ë°©ë²•

ì´ ë´‡ì„ ì§ì ‘ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„  ì•„ë˜ì˜ ê³¼ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.

**1. í”„ë¡œì íŠ¸ ë³µì œ**
```bash
git clone [https://github.com/seojoon1/mogakco.git](https://github.com/seojoon1/mogakco.git)
cd mogakco
```

**2. í•„ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜**
ë´‡ì„ ì‹¤í–‰í•˜ëŠ” ë° í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.
```bash
pip install -r requirements.txt
```
> **Note**: `requirements.txt` íŒŒì¼ì´ ì—†ë‹¤ë©´, í„°ë¯¸ë„ì—ì„œ `pip install discord.py python-dotenv`ë¥¼ ì‹¤í–‰í•´ì£¼ì„¸ìš”.

**3. `.env` íŒŒì¼ ìƒì„±**
í”„ë¡œì íŠ¸ í´ë” ìµœìƒë‹¨ì— `.env` íŒŒì¼ì„ ë§Œë“¤ê³ , ì•„ë˜ ë‚´ìš©ê³¼ ê°™ì´ ë´‡ í† í°ì„ ì…ë ¥í•©ë‹ˆë‹¤. **ì´ íŒŒì¼ì€ ì ˆëŒ€ë¡œ ê¹ƒí—ˆë¸Œì— ì˜¬ë¦¬ë©´ ì•ˆ ë©ë‹ˆë‹¤!**
```
API_KEY="ì—¬ê¸°ì—_ë””ìŠ¤ì½”ë“œ_ê°œë°œìí¬í„¸ì—ì„œ_ë°›ì€_ë´‡_í† í°ì„_ì…ë ¥í•˜ì„¸ìš”"
```

**4. ë´‡ ì´ˆëŒ€í•˜ê¸°**
[Discord ê°œë°œì í¬í„¸](https://discord.com/developers/applications)ì—ì„œ ë´‡ì„ ì„œë²„ì— ì´ˆëŒ€í•©ë‹ˆë‹¤.
-   **Scopes**: `bot`, `application.commands`
-   **í•„ìš” ê¶Œí•œ**: `Manage Channels`, `Manage Messages`, `Moderate Members`, `Kick Members`, `Ban Members`, `Send Messages`, `Read Message History` ë“± ë´‡ ê¸°ëŠ¥ì— í•„ìš”í•œ ê¶Œí•œ

---

## â–¶ï¸ ë´‡ ì‹¤í–‰ ë°©ë²•

ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í„°ë¯¸ë„ì— ì…ë ¥í•˜ì—¬ ë´‡ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.
```bash
python bot_new.py
```

---

## ğŸ“„ ì„¤ì • íŒŒì¼

-   `config.json`: `/ì„¤ì •` ëª…ë ¹ì–´ë¡œ ì„¤ì •ëœ ì±„ë„ IDê°€ ì´ íŒŒì¼ì— ìë™ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤. ì´ íŒŒì¼ì€ ë´‡ì´ ì¬ì‹œì‘ë˜ì–´ë„ ì„¤ì •ì„ ê¸°ì–µí•˜ê²Œ í•´ì¤ë‹ˆë‹¤.

---

## ğŸ—ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡°

ì´ ë´‡ì€ ëª¨ë“ˆí™”ëœ êµ¬ì¡°ë¡œ ë˜ì–´ ìˆì–´ ìœ ì§€ë³´ìˆ˜ì™€ í™•ì¥ì´ ì‰½ìŠµë‹ˆë‹¤.

```
discordbotstudy/
â”œâ”€â”€ bot_new.py              # ë©”ì¸ ì‹¤í–‰ íŒŒì¼
â”œâ”€â”€ config.json             # ì„¤ì • ì €ì¥ íŒŒì¼
â”œâ”€â”€ .env                    # ë´‡ í† í° (ë¹„ê³µê°œ)
â”œâ”€â”€ requirements.txt        # í•„ìš”í•œ íŒ¨í‚¤ì§€ ëª©ë¡
â”œâ”€â”€ utils/                  # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”œâ”€â”€ config_manager.py   # ì„¤ì • íŒŒì¼ ê´€ë¦¬
â”‚   â””â”€â”€ formatters.py       # ì‹œê°„ í¬ë§·íŒ…
â”œâ”€â”€ views/                  # Discord UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ settings_view.py    # ì±„ë„ ì„¤ì • UI
â”‚   â”œâ”€â”€ welcome_view.py     # í™˜ì˜ ë©”ì‹œì§€ UI
â”‚   â”œâ”€â”€ punishment_view.py  # ì²˜ë²Œ ì„¤ì • UI
â”‚   â””â”€â”€ keyword_modal.py    # í‚¤ì›Œë“œ ëª¨ë‹¬
â”œâ”€â”€ events/                 # ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
â”‚   â”œâ”€â”€ member_events.py    # ë©¤ë²„ ì…ì¥ ì´ë²¤íŠ¸
â”‚   â”œâ”€â”€ voice_events.py     # ìŒì„± ì±„ë„ ì´ë²¤íŠ¸
â”‚   â””â”€â”€ message_events.py   # ë©”ì‹œì§€ ê²€ì—´ ì´ë²¤íŠ¸
â””â”€â”€ cogs/                   # ëª…ë ¹ì–´ ê·¸ë£¹ (Cogs)
    â”œâ”€â”€ admin.py            # ê´€ë¦¬ì ëª…ë ¹ì–´
    â”œâ”€â”€ moderation.py       # ê²€ì—´/ì²˜ë²Œ ëª…ë ¹ì–´
    â”œâ”€â”€ welcome.py          # í™˜ì˜ ë©”ì‹œì§€ ëª…ë ¹ì–´
    â””â”€â”€ voice.py            # ìŒì„±/ì¼ë°˜ ëª…ë ¹ì–´
```

---

## ğŸ”§ ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€í•˜ëŠ” ë°©ë²•

### 1ï¸âƒ£ ìƒˆë¡œìš´ ëª…ë ¹ì–´ ì¶”ê°€í•˜ê¸°

**ì˜ˆì‹œ: `/ì¸ì‚¬` ëª…ë ¹ì–´ ì¶”ê°€**

#### Step 1: Cog íŒŒì¼ ìƒì„± ë˜ëŠ” ê¸°ì¡´ íŒŒì¼ ìˆ˜ì •

ê¸°ì¡´ Cogì— ì¶”ê°€í•˜ê±°ë‚˜ ìƒˆ íŒŒì¼ì„ ë§Œë“­ë‹ˆë‹¤.

**ë°©ë²• A) ê¸°ì¡´ íŒŒì¼ì— ì¶”ê°€** (`cogs/voice.py`)
```python
@app_commands.command(name="ì¸ì‚¬", description="ë´‡ì´ ì¸ì‚¬í•©ë‹ˆë‹¤.")
async def greet(self, interaction: discord.Interaction):
    await interaction.response.send_message(f"ì•ˆë…•í•˜ì„¸ìš” {interaction.user.mention}ë‹˜! ğŸ‘‹")
```

**ë°©ë²• B) ìƒˆ Cog íŒŒì¼ ìƒì„±** (`cogs/greeting.py`)
```python
import discord
from discord import app_commands
from discord.ext import commands

class GreetingCog(commands.Cog):
    """ì¸ì‚¬ ê´€ë ¨ ëª…ë ¹ì–´"""
    def __init__(self, bot):
        self.bot = bot

    @app_commands.command(name="ì¸ì‚¬", description="ë´‡ì´ ì¸ì‚¬í•©ë‹ˆë‹¤.")
    async def greet(self, interaction: discord.Interaction):
        await interaction.response.send_message(f"ì•ˆë…•í•˜ì„¸ìš” {interaction.user.mention}ë‹˜! ğŸ‘‹")

async def setup(bot):
    await bot.add_cog(GreetingCog(bot))
```

#### Step 2: Cog ë“±ë¡ (`cogs/__init__.py`)

ìƒˆ íŒŒì¼ì„ ë§Œë“¤ì—ˆë‹¤ë©´ `__init__.py`ì— ì¶”ê°€:
```python
from .greeting import GreetingCog

async def setup_all_cogs(bot):
    await bot.add_cog(AdminCog(bot))
    await bot.add_cog(ModerationCog(bot))
    await bot.add_cog(WelcomeCog(bot))
    await bot.add_cog(VoiceCog(bot))
    await bot.add_cog(GreetingCog(bot))  # ì¶”ê°€
```

### 2ï¸âƒ£ ìƒˆë¡œìš´ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì¶”ê°€í•˜ê¸°

**ì˜ˆì‹œ: ë©”ì‹œì§€ ìˆ˜ì • ê°ì§€**

#### Step 1: ì´ë²¤íŠ¸ íŒŒì¼ ìƒì„± (`events/message_edit_events.py`)
```python
import discord
from utils import load_config

def setup(bot):
    @bot.event
    async def on_message_edit(before, after):
        if before.author.bot:
            return

        guild_id = str(before.guild.id)
        config = load_config().get(guild_id, {})
        log_channel_id = config.get('text_channel_id')

        if log_channel_id:
            log_channel = bot.get_channel(log_channel_id)
            if log_channel:
                embed = discord.Embed(title="âœï¸ ë©”ì‹œì§€ ìˆ˜ì •ë¨", color=discord.Color.blue())
                embed.add_field(name="ì´ì „", value=before.content[:1000], inline=False)
                embed.add_field(name="ì´í›„", value=after.content[:1000], inline=False)
                await log_channel.send(embed=embed)
```

#### Step 2: ì´ë²¤íŠ¸ ë“±ë¡ (`events/__init__.py`)
```python
from .message_edit_events import setup as setup_message_edit_events

def setup_all_events(bot):
    setup_member_events(bot)
    setup_voice_events(bot)
    setup_message_events(bot)
    setup_message_edit_events(bot)  # ì¶”ê°€
```

### 3ï¸âƒ£ ìƒˆë¡œìš´ UI ì»´í¬ë„ŒíŠ¸ ì¶”ê°€í•˜ê¸°

**ì˜ˆì‹œ: ì—­í•  ì„ íƒ ë“œë¡­ë‹¤ìš´**

#### Step 1: View íŒŒì¼ ìƒì„± (`views/role_view.py`)
```python
import discord
from utils import load_config, save_config, config_lock

class RoleSelectView(discord.ui.View):
    def __init__(self):
        super().__init__(timeout=180)

    @discord.ui.select(
        cls=discord.ui.RoleSelect,
        placeholder="ì—­í• ì„ ì„ íƒí•˜ì„¸ìš”",
        min_values=1,
        max_values=1
    )
    async def role_select(self, interaction: discord.Interaction, select: discord.ui.RoleSelect):
        role = select.values[0]
        await interaction.response.send_message(f"ì„ íƒí•œ ì—­í• : {role.mention}", ephemeral=True)
```

#### Step 2: View ë“±ë¡ (`views/__init__.py`)
```python
from .role_view import RoleSelectView

__all__ = [
    'SettingsView',
    'WelcomeSettingsView',
    'RoleSelectView',  # ì¶”ê°€
    # ...
]
```

### 4ï¸âƒ£ ìƒˆë¡œìš´ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ì¶”ê°€í•˜ê¸°

**ì˜ˆì‹œ: ë‚ ì§œ í¬ë§·íŒ… í•¨ìˆ˜**

#### Step 1: ìœ í‹¸ë¦¬í‹° íŒŒì¼ ìˆ˜ì • (`utils/formatters.py`)
```python
from datetime import datetime

def format_date(dt: datetime):
    """ë‚ ì§œë¥¼ í•œêµ­ì–´ í˜•ì‹ìœ¼ë¡œ í¬ë§·íŒ…"""
    return dt.strftime("%Yë…„ %mì›” %dì¼ %H:%M:%S")
```

#### Step 2: Export ì¶”ê°€ (`utils/__init__.py`)
```python
from .formatters import format_duration, format_date

__all__ = ['load_config', 'save_config', 'config_lock', 'CONFIG_FILE', 'format_duration', 'format_date']
```

---

## ğŸ’¡ ê°œë°œ íŒ

### âœ… ê¶Œì¥ ì‚¬í•­
- ê° CogëŠ” í•˜ë‚˜ì˜ ê¸°ëŠ¥ ê·¸ë£¹ë§Œ ë‹´ë‹¹í•˜ë„ë¡ ì„¤ê³„
- ë³µì¡í•œ UIëŠ” ë³„ë„ì˜ View í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬
- ê³µí†µ ë¡œì§ì€ `utils/`ì— í•¨ìˆ˜ë¡œ ì¶”ì¶œ
- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” `events/`ì— ë¶„ë¦¬

### ğŸ” ë””ë²„ê¹…
- `print()` ëŒ€ì‹  `logging` ëª¨ë“ˆ ì‚¬ìš© ê¶Œì¥
- ì—ëŸ¬ ë°œìƒ ì‹œ ë¡œê·¸ ì±„ë„ì— ê¸°ë¡í•˜ëŠ” ìŠµê´€

### ğŸš€ ì„±ëŠ¥ ìµœì í™”
- `config.json` ì½ê¸°ëŠ” ìµœì†Œí™” (ìºì‹± ê³ ë ¤)
- ë¬´ê±°ìš´ ì‘ì—…ì€ `asyncio.create_task()` ì‚¬ìš©

---

seojoon1